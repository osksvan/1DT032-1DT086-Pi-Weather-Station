{# 
  Historical Data Template for Raspberry Pi Weather Station Project

  This Jinja2 template renders the historical data page using Bokeh for interactive plots.
  It extends the base.html layout and includes:
    - A form to select the number of days of data to display (POST to /historical_data).
    - Embedded Bokeh plot divs and scripts for each sensor's line chart.
    - Inline JS/CSS resources from Bokeh for standalone rendering.

  Dependencies: Flask, Bokeh (embedded via components).
#}

{% extends "base.html" %}

{# Set the page title #}
{% block title %}Raspberry Pi Weather Station - Historical Data{% endblock %}

{# Add Bokeh resources and plot scripts to the <head> for proper loading #}
{% block head %}  
    {{ super() }} {# Inherit any head content from base.html
    
    {# Render Bokeh JS resources inline #}
    {{ js_resources|indent(4)|safe }}
    
    {# Render Bokeh CSS resources inline #}
    {{ css_resources|indent(4)|safe }}
    
    {# Embed each plot's JavaScript (generated by bokeh.embed.components) #}
    {% for plot_script in plot_scripts %}
      {{ plot_script|indent(4)|safe }}
    {% endfor %}
{% endblock %}



{# Main content block: Form for day selection and plot displays #}
{% block content %}
  {{ super() }} {# Inherit any content from base.html, e.g., navigation #}
  <section class="content-section">
    <h2>Historical Sensor Data</h2>
    <p class="description">

      View trends from the Sense HAT sensors over the past {{ last_num_days }} days. Adjust below to update.
    </p>

    {# Inherit any content from base.html, e.g., navigation #}
    <form action="{{ url_for("historical_data") }}" method="post" class="days-form">
      <label for="last_num_days">Number of days:</label>
      <input type="text" id="last_num_days" name="last_num_days" value="{{last_num_days}}" min="1" required>
      <button type="submit">Update</button>
    </form>



  </section>
  
  <div class="plots">
    {# Render each Bokeh plot div (one per sensor, e.g., temperature line chart) #}
    {% for plot_div in plot_divs %}
      <div class="plot-container">
        {{ plot_div|indent(4)|safe }}
      </div>
    {% endfor %}
    </div>

{% endblock %}
